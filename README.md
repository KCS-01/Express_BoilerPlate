# Express(TypeScript)

## 디렉토리 구조

```
.root                                  ───> `루트 디렉토리`
│
├─ index.ts                            ───> `엔트리 포인트`
├─ app.ts                              ───> 서버(앱) 클래스 파일
├─ middlewars                          ───> 미들웨어 설정 디렉토리
├─ interface                           ───> 타입 인터페이스 디렉토리
├─ config                              ───> 사용할 설정 변수 디렉토리
├─ tests                               ───> 테스트 코드 작성 디렉토리(Jest)
├─ src                                 ───> 소스 코드 디렉토리
│   │
│   └─ example
│         ├─ example.module.ts         ───> 의존성 주입
│         ├─ example.router.ts         ───> 라우터 세부 경로 설정
│         ├─ example.controller.ts     ───> 컨트롤러 파일
│         ├─ example.service.ts        ───> 서비스
│         └─ example.repository.ts     ───> 레포지토리
│
└─ tsconfig.json  ───>  컴파일 설정, 별칭(@) 추가시 paths에 작성 필수
```

## 작동 순서

0. 서버 실행(포트)

1. `src`안의 소스들부터 인스턴스 생성

    - 다음을 모듈에서 실행
      (1) 모델(DB) 인스턴스 생성(연결)
      (2) 레포지토리 인스턴스 생성(모델 주입)
      (3) 서비스 인스턴스 생성(레포지토리 주입)
      (4) 컨트롤러 인스턴스 생성(서비스 주입)
      (5) 컨트롤러 내보내기
    - 모듈에서 가져온 컨트롤러 라우터에 연결

2. 각 도메인(main, auth 등등)에서 가져온 라우터를 메인 라우터(미들웨어)에 연결

3. 서버에 미들웨어 장착(마운트)

    - 로거(모건)
    - 라우터(각 도메인)
    - 쿠키 파서
    - JSON 파서
    - 폼 데이터 파서
    - ...

4. 서버 구성 완료
